import{j as w,r as u,p as P,o as S,c as a,b as E,d as s,e as h,F as v,g as _,k as B,T as N,a as r,t as n,n as F,h as b,x as z,u as I,_ as V}from"./index-BU1zF_Ky.js";import{a as T}from"./index-Dq7h7Pqt.js";import{N as L}from"./NavbarHome-Cwx0hzg_.js";const A={class:"servicios-page"},M={class:"servicios-container"},q={key:0,class:"destacados-section"},G={class:"carousel-destacados"},H=["onClick"],J=["src","alt"],R={key:1,class:"ofertas-section"},W={class:"grid-ofertas"},Y=["onClick"],K=["src","alt"],Q={class:"precio-original"},X={class:"precio-oferta"},Z={class:"categorias-tabs"},ss=["onClick"],es={class:"servicios-content"},ts=["onClick"],os={class:"servicio-image-container"},is=["src","alt"],as={key:0,class:"oferta-tag"},rs={class:"servicio-info"},ns={class:"servicio-header"},cs={class:"servicio-title"},ls={class:"servicio-category"},ds={class:"servicio-description"},us={class:"servicio-price"},vs={key:0,class:"original-price"},_s=w({__name:"Servicios",setup(hs){const j=I(),p="https://lecturasdjazz-api.onrender.com",f=u([]),x=u({}),g=u([]),m=u([]),l=u(1),U=P(()=>{const o=[...f.value].sort((i,e)=>i.orden-e.orden);return o.length>0&&!l.value&&(l.value=o[0].id),o});async function D(){try{const{data:o}=await T.get(`${p}/api/admin/configuracion-servicios`);f.value=o.map(t=>({id:t.id,titulo:t.titulo,subtitulo:t.subtitulo,productosUuids:Array.isArray(t.productosUuids)?t.productosUuids:(t.productosUuids||"").split(",").filter(d=>d.trim()),orden:t.orden}));const i=[],e=[];for(const t of f.value){const d=[];for(const O of t.productosUuids)try{const{data:c}=await T.get(`${p}/api/admin/productos/${O}`);d.push(c),c.destacado&&i.push(c),c.enOferta&&e.push(c)}catch{console.warn(`Producto con UUID ${O} no encontrado`)}x.value[t.id]=d}g.value=i,m.value=e}catch(o){console.error("Error al cargar la configuraciÃ³n:",o)}}function k(o){return o?o.startsWith("http")?o:`${p}${o}`:"/placeholder-producto.jpg"}function y(o){const i=o.target;i.src="/placeholder-producto.jpg"}function $(o){return o.enOferta&&o.porcentajeOferta?o.precio*(1-o.porcentajeOferta/100):o.precio}function C(o){j.push(`/producto/${o}`)}return S(()=>{D()}),(o,i)=>(r(),a("div",A,[E(L),i[2]||(i[2]=s("div",{class:"hero-section"},[s("div",{class:"hero-content"},[s("h1",{class:"hero-title"},"Servicios Espirituales"),s("p",{class:"hero-subtitle"},"Trabajos energÃ©ticos y Lecturas de Tarot")])],-1)),s("div",M,[g.value.length?(r(),a("div",q,[i[0]||(i[0]=s("h2",null,"ðŸŒŸ Productos Destacados",-1)),s("div",G,[(r(!0),a(v,null,_(g.value,e=>(r(),a("div",{key:e.uuid,class:"destacado-card",onClick:t=>C(e.uuid)},[s("img",{src:k(e.imagenUrl),alt:e.titulo,onError:y},null,40,J),s("h3",null,n(e.titulo),1),s("p",null,"$"+n($(e).toFixed(2)),1)],8,H))),128))])])):h("",!0),m.value.length?(r(),a("div",R,[i[1]||(i[1]=s("h2",null,"ðŸ”¥ En Oferta",-1)),s("div",W,[(r(!0),a(v,null,_(m.value,e=>(r(),a("div",{key:e.uuid,class:"oferta-card",onClick:t=>C(e.uuid)},[s("img",{src:k(e.imagenUrl),alt:e.titulo,onError:y},null,40,K),s("h3",null,n(e.titulo),1),s("p",null,[s("span",Q,"$"+n(e.precio.toFixed(2)),1),s("span",X,"$"+n($(e).toFixed(2)),1)])],8,Y))),128))])])):h("",!0),s("div",Z,[(r(!0),a(v,null,_(U.value,e=>(r(),a("button",{key:e.id,class:F(["categoria-tab",{active:l.value===e.id}]),onClick:t=>l.value=e.id},n(e.titulo),11,ss))),128))]),s("div",es,[E(N,{name:"servicios-fade"},{default:B(()=>[(r(!0),a(v,null,_(U.value,e=>b((r(),a("div",{key:e.id,class:"servicios-grid"},[(r(!0),a(v,null,_(x.value[e.id],t=>(r(),a("div",{key:t.uuid,class:"servicio-card",onClick:d=>C(t.uuid)},[s("div",os,[s("img",{src:k(t.imagenUrl),alt:t.titulo,class:"servicio-image",onError:y,loading:"lazy"},null,40,is),t.enOferta?(r(),a("div",as," Oferta ")):h("",!0)]),s("div",rs,[s("div",ns,[s("h3",cs,n(t.titulo),1),s("span",ls,n(t.categoria),1)]),s("p",ds,n(t.descripcion),1),s("div",us,[t.enOferta?(r(),a("span",vs," $"+n(t.precio.toFixed(2)),1)):h("",!0),s("span",{class:F(["current-price",{"has-discount":t.enOferta}])}," $"+n($(t).toFixed(2)),3)])])],8,ts))),128))])),[[z,l.value===e.id]])),128))]),_:1})])]),i[3]||(i[3]=s("footer",{class:"footer"},[s("p",null,"Â© 2024 SystemVkode - JMLF. Todos los derechos reservados."),s("p",null,"Contacto: 8441786280")],-1))]))}}),ms=V(_s,[["__scopeId","data-v-249da2b1"]]);export{ms as default};
