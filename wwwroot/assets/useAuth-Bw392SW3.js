import{r,u as c,x as l}from"./index-BNhqJ-ys.js";function f(e){try{return e?JSON.parse(e):null}catch{return null}}const o=r(typeof window<"u"?localStorage.getItem("token"):null),t=r(typeof window<"u"?f(localStorage.getItem("usuario")):null);l(o,e=>{typeof window<"u"&&(e?localStorage.setItem("token",e):localStorage.removeItem("token"))});l(t,e=>{typeof window<"u"&&(e?localStorage.setItem("usuario",JSON.stringify(e)):localStorage.removeItem("usuario"))});function m(){const e=c();function a(u){o.value=u.token,t.value=u.usuario,localStorage.setItem("token",u.token),localStorage.setItem("usuario",JSON.stringify(u.usuario))}function n(){o.value=null,t.value=null,localStorage.removeItem("token"),localStorage.removeItem("usuario")}function i(){n(),e.push("/login")}function s(){return!!o.value&&!!t.value}return{token:o,usuario:t,loginSuccess:a,logout:i,clearAuth:n,isLoggedIn:s}}export{m as u};
