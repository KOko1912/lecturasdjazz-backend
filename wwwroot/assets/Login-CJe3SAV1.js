import{j as f,r as i,c as m,d as t,b as g,h as l,v as u,w as v,k as _,l as k,a as w,f as x,u as y,_ as b}from"./index-CW287Eje.js";import{a as N}from"./index-Dq7h7Pqt.js";const S={class:"login-page"},V=f({__name:"Login",setup(C){const p="https://lecturasdjazz-api.onrender.com",a=i(""),r=i(""),d=y();async function c(){if(!a.value||!r.value){alert("Teléfono y contraseña son obligatorios.");return}try{const o=await N.post(`${p}/api/auth/login`,{telefono:a.value,password:r.value}),{token:e,usuario:s}=o.data;e&&s?(localStorage.setItem("token",e),localStorage.setItem("usuario",JSON.stringify(s)),d.push("/usuario")):alert("Login fallido: no se recibió token o usuario.")}catch(o){console.error("❌ Error al iniciar sesión:",o),alert(o?.response?.data?.message||"Error desconocido en el login.")}}return(o,e)=>{const s=k("router-link");return w(),m("div",S,[e[4]||(e[4]=t("h2",null,"Iniciar Sesión",-1)),t("form",{onSubmit:v(c,["prevent"])},[l(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>a.value=n),type:"tel",placeholder:"Teléfono",required:""},null,512),[[u,a.value]]),l(t("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>r.value=n),type:"password",placeholder:"Contraseña",required:""},null,512),[[u,r.value]]),e[2]||(e[2]=t("button",{type:"submit"},"Entrar",-1))],32),g(s,{to:"/registro"},{default:_(()=>e[3]||(e[3]=[x("¿No tienes cuenta? Regístrate")])),_:1,__:[3]})])}}}),T=b(V,[["__scopeId","data-v-8aae01d3"]]);export{T as default};
