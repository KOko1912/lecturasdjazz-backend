import{j as w,r as d,o as _,l as x,c as k,e as y,u as N,b as p,d as s,p as V,w as C,h as v,f as n,v as f,q as T,s as h,a as M,_ as E}from"./index-DvMzjJ6p.js";import{a as L}from"./index-Dq7h7Pqt.js";import{u as q,N as A}from"./NavbarHome-OIqstuiu.js";const B={key:0,class:"app-container"},I={class:"login-container"},S={class:"mystical-card"},U={class:"input-group"},j={class:"input-group"},z={class:"login-footer"},P=w({__name:"Login",setup(D){const{loginSuccess:m,isLoggedIn:u}=q(),i=d(""),r=d(""),c=x(),g="https://lecturasdjazz-api.onrender.com",l=d(!1);_(()=>{u()&&(console.log("ðŸŸ¢ Ya logueado, redirigiendo a /usuario"),c.replace("/usuario"))});async function b(){if(!l.value){l.value=!0;try{const e=await L.post(`${g}/api/auth/login`,{telefono:i.value,password:r.value}),{token:o,usuario:t}=e.data;o&&t?(m({token:o,usuario:t}),console.log("âœ… Login exitoso. Token guardado:",o),await new Promise(a=>setTimeout(a,100)),c.replace("/usuario")):alert("Inicio de sesiÃ³n fallido: falta token o informaciÃ³n de usuario.")}catch(e){alert(e?.response?.data?.message||"Error al iniciar sesiÃ³n"),console.error(e)}finally{l.value=!1}}}return(e,o)=>{const t=T("router-link");return N(u)()?y("",!0):(M(),k("div",B,[p(A),s("div",I,[s("div",S,[o[7]||(o[7]=V('<div class="title-wrapper" data-v-26d565bc><h1 class="main-title" data-v-26d565bc>Acceso MÃ­stico</h1><div class="golden-divider" data-v-26d565bc></div><h2 class="subtitle" data-v-26d565bc>Conecta con tu energÃ­a interior</h2></div><div class="login-animation" data-v-26d565bc><div class="crystal-ball" data-v-26d565bc><div class="inner-glow" data-v-26d565bc></div></div><p class="animation-text" data-v-26d565bc>El universo espera tu regreso</p></div>',2)),s("form",{onSubmit:C(b,["prevent"]),class:"login-form"},[s("div",U,[o[2]||(o[2]=s("label",{for:"telefono"},[s("span",{class:"detail-icon"},"ðŸ“ž"),n(" TelÃ©fono ")],-1)),v(s("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>i.value=a),type:"text",id:"telefono",class:"login-input",required:"",placeholder:"Telefono"},null,512),[[f,i.value]])]),s("div",j,[o[3]||(o[3]=s("label",{for:"password"},[s("span",{class:"detail-icon"},"ðŸ”’"),n(" ContraseÃ±a ")],-1)),v(s("input",{"onUpdate:modelValue":o[1]||(o[1]=a=>r.value=a),type:"password",id:"password",class:"login-input",required:"",placeholder:"Password"},null,512),[[f,r.value]])]),o[4]||(o[4]=s("button",{type:"submit",class:"login-button"},[s("span",{class:"button-icon"},"âœ¨"),n(" Entrar ")],-1))],32),s("div",z,[o[6]||(o[6]=s("p",null,"Â¿AÃºn no formas parte del cÃ­rculo?",-1)),p(t,{to:"/registro",class:"register-link"},{default:h(()=>o[5]||(o[5]=[s("span",{class:"button-icon"},"ðŸŒŒ",-1),n(" Unirse al Misterio ")])),_:1,__:[5]})])])])]))}}}),Y=E(P,[["__scopeId","data-v-26d565bc"]]);export{Y as default};
