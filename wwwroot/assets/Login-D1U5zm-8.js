import{j as c,r as i,o as f,u as g,c as v,d as t,b as _,h as u,v as d,w as k,k as I,l as S,a as w,f as x,_ as b}from"./index-BU1zF_Ky.js";import{a as y}from"./index-Dq7h7Pqt.js";const N={class:"login-page"},V=c({__name:"Login",setup(h){const p="https://lecturasdjazz-api.onrender.com",s=i(""),r=i(""),l=g();f(()=>{const o=localStorage.getItem("token"),e=localStorage.getItem("usuario");o&&e&&l.push("/servicios")});async function m(){try{const o=await y.post(`${p}/api/auth/login`,{telefono:s.value,password:r.value}),{token:e,usuario:a}=o.data;e&&a?(localStorage.removeItem("adminToken"),localStorage.removeItem("adminId"),localStorage.removeItem("adminNombre"),localStorage.setItem("token",e),localStorage.setItem("usuario",JSON.stringify(a)),l.push("/servicios")):alert("Login fallido, datos incompletos")}catch(o){alert(o?.response?.data?.message||"Error al iniciar sesión"),console.error(o)}}return(o,e)=>{const a=S("router-link");return w(),v("div",N,[e[4]||(e[4]=t("h2",null,"Iniciar Sesión",-1)),t("form",{onSubmit:k(m,["prevent"])},[u(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>s.value=n),type:"tel",placeholder:"Teléfono",required:""},null,512),[[d,s.value]]),u(t("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>r.value=n),type:"password",placeholder:"Contraseña",required:""},null,512),[[d,r.value]]),e[2]||(e[2]=t("button",{type:"submit"},"Entrar",-1))],32),_(a,{to:"/registro"},{default:I(()=>e[3]||(e[3]=[x("¿No tienes cuenta? Regístrate")])),_:1,__:[3]})])}}}),B=b(V,[["__scopeId","data-v-273ef8bd"]]);export{B as default};
