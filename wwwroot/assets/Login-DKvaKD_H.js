import{j as w,r as d,o as b,u as x,c as k,e as y,p as C,b as p,d as o,s as N,w as T,h as v,f as i,v as m,m as V,l as h,a as M,_ as E}from"./index-BNhqJ-ys.js";import{a as L}from"./index-Dq7h7Pqt.js";import{N as A}from"./NavbarHome-K9bsUF0l.js";import{u as B}from"./useAuth-Bw392SW3.js";const I={key:0,class:"app-container"},S={class:"login-container"},U={class:"mystical-card"},j={class:"input-group"},q={class:"input-group"},z={class:"login-footer"},D=w({__name:"Login",setup(H){const{loginSuccess:f,isLoggedIn:u}=B(),n=d(""),r=d(""),c=x(),g="https://lecturasdjazz-api.onrender.com",l=d(!1);b(()=>{u()&&(console.log("ðŸŸ¢ Ya logueado, redirigiendo a /usuario"),c.replace("/usuario"))});async function _(){if(!l.value){l.value=!0;try{const a=await L.post(`${g}/api/auth/login`,{telefono:n.value,password:r.value}),{token:e,usuario:t}=a.data;e&&t?(f({token:e,usuario:t}),console.log("âœ… Login exitoso. Token guardado:",e),await new Promise(s=>setTimeout(s,100)),c.replace("/usuario")):alert("Inicio de sesiÃ³n fallido: falta token o informaciÃ³n de usuario.")}catch(a){alert(a?.response?.data?.message||"Error al iniciar sesiÃ³n"),console.error(a)}finally{l.value=!1}}}return(a,e)=>{const t=h("router-link");return C(u)()?y("",!0):(M(),k("div",I,[p(A),o("div",S,[o("div",U,[e[7]||(e[7]=N('<div class="title-wrapper" data-v-ae7d4643><h1 class="main-title" data-v-ae7d4643>Acceso MÃ­stico</h1><div class="golden-divider" data-v-ae7d4643></div><h2 class="subtitle" data-v-ae7d4643>Conecta con tu energÃ­a interior</h2></div><div class="login-animation" data-v-ae7d4643><div class="crystal-ball" data-v-ae7d4643><div class="inner-glow" data-v-ae7d4643></div></div><p class="animation-text" data-v-ae7d4643>El universo espera tu regreso</p></div>',2)),o("form",{onSubmit:T(_,["prevent"]),class:"login-form"},[o("div",j,[e[2]||(e[2]=o("label",{for:"telefono"},[o("span",{class:"detail-icon"},"ðŸ“ž"),i(" TelÃ©fono ")],-1)),v(o("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>n.value=s),type:"text",id:"telefono",class:"login-input",required:"",placeholder:"Tu nÃºmero celestial"},null,512),[[m,n.value]])]),o("div",q,[e[3]||(e[3]=o("label",{for:"password"},[o("span",{class:"detail-icon"},"ðŸ”’"),i(" ContraseÃ±a ")],-1)),v(o("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>r.value=s),type:"password",id:"password",class:"login-input",required:"",placeholder:"Tu palabra secreta"},null,512),[[m,r.value]])]),e[4]||(e[4]=o("button",{type:"submit",class:"login-button"},[o("span",{class:"button-icon"},"âœ¨"),i(" Entrar al CÃ­rculo ")],-1))],32),o("div",z,[e[6]||(e[6]=o("p",null,"Â¿AÃºn no formas parte del cÃ­rculo?",-1)),p(t,{to:"/registro",class:"register-link"},{default:V(()=>e[5]||(e[5]=[o("span",{class:"button-icon"},"ðŸŒŒ",-1),i(" Unirse al Misterio ")])),_:1,__:[5]})])])])]))}}}),F=E(D,[["__scopeId","data-v-ae7d4643"]]);export{F as default};
