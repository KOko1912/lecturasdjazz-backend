import{j as m,r as i,c as f,d as t,b as g,h as l,v as u,w as v,k as _,l as w,a as k,f as x,u as y,_ as N}from"./index-BHI-bEV9.js";import{a as S}from"./index-Dq7h7Pqt.js";const V={class:"login-page"},b=m({__name:"Login",setup(C){const p="https://lecturasdjazz-api.onrender.com",a=i(""),r=i(""),d=y();async function c(){try{const o=await S.post(`${p}/api/auth/login`,{telefono:a.value,password:r.value}),{token:e,usuario:s}=o.data;e&&s?(localStorage.setItem("token",e),localStorage.setItem("usuario",JSON.stringify(s)),d.push("/usuario")):alert("Login fallido, datos incompletos")}catch(o){alert(o?.response?.data?.message||"Error al iniciar sesión"),console.error(o)}}return(o,e)=>{const s=w("router-link");return k(),f("div",V,[e[4]||(e[4]=t("h2",null,"Iniciar Sesión",-1)),t("form",{onSubmit:v(c,["prevent"])},[l(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>a.value=n),type:"tel",placeholder:"Teléfono",required:""},null,512),[[u,a.value]]),l(t("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>r.value=n),type:"password",placeholder:"Contraseña",required:""},null,512),[[u,r.value]]),e[2]||(e[2]=t("button",{type:"submit"},"Entrar",-1))],32),g(s,{to:"/registro"},{default:_(()=>e[3]||(e[3]=[x("¿No tienes cuenta? Regístrate")])),_:1,__:[3]})])}}}),B=N(b,[["__scopeId","data-v-3489f473"]]);export{B as default};
